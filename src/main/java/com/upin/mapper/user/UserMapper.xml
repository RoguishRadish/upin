<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.user.UserDao">
	<resultMap id="base" type="com.entity.user.User" ><!-- 
		<id column="id" property="id" jdbcType="VARCHAR" />
		<result column="nickName" property="nickName" jdbcType="VARCHAR" />
		<result column="userPic" property="userPic" jdbcType="VARCHAR" />
		<result column="openId" property="openId" jdbcType="VARCHAR" />
		<result column="userName" property="userName" jdbcType="VARCHAR" />
		<result column="sex" property="sex" jdbcType="VARCHAR" />
		<result column="identityNum" property="identityNum" jdbcType="VARCHAR" />
		<result column="phone" property="phone" jdbcType="VARCHAR" />
		<result column="email" property="email" jdbcType="VARCHAR" />
		<result column="money" property="money" jdbcType="VARCHAR" />
		<result column="firstLoginTime" property="firstLoginTime" jdbcType="VARCHAR" />
		<result column="lastLoginTime" property="lastLoginTime" jdbcType="VARCHAR" />
		<result column="loginNum" property="loginNum" jdbcType="VARCHAR" />
	 --></resultMap>
    <select id="getOneById" resultMap="base" parameterType="String">
        SELECT
			u.id, u.nickName, u.userPic, u.openId, u.userName, u.sex, u.identityNum, u.phone, u.email,
			u.money, u.firstLoginTime, u.lastLoginTime, u.loginNum
			FROM
			q_user AS u
        WHERE 1 = 1 
            AND u.id = #{id}
    </select>
    <select id="getOneByOpenId" resultMap="base" parameterType="String">
        SELECT
			u.id, u.nickName, u.userPic, u.openId, u.userName, u.sex, u.identityNum, u.phone, u.email,
			u.money, u.firstLoginTime, u.lastLoginTime, u.loginNum
			FROM
			q_user AS u
        WHERE 1 = 1 
            AND u.openId = #{openId}
    </select>
    <insert id="insert"  parameterType="com.entity.user.User">    
        INSERT INTO q_user
           (`id`,
             `nickName`,
             `userPic`,
             `openId`,
             `userName`,
             `sex`,
             `identityNum`,
             `phone`,
             `email`,
             `money`,
             `firstLoginTime`,
             `lastLoginTime`,
             `loginNum`)
        VALUES (#{id},
            #{nickName},
            #{userPic},
            #{openId},
            #{userName},
            #{sex},
            #{identityNum},
            #{phone},
            #{email},
            #{money},
            #{firstLoginTime},
            #{lastLoginTime},
            #{loginNum});
    </insert>
    <update id="update" parameterType="com.entity.user.User">
        UPDATE `oa_apply`
        SET
            `id` = #{id},
            `nickName`= #{nickName},
            `userPic` = #{userPic},
            `openId` = #{openId},
            `userName` = #{userName},
            `sex` = #{sex},
            `identityNum` = #{identityNum},
            `phone` = #{phone},
            `email` = #{email},
            `money` = #{money},
            `firstLoginTime` = #{firstLoginTime},
            `lastLoginTime` = #{lastLoginTime},
            `loginNum` = #{loginNum}
        WHERE `id` = #{id}
    </update>
</mapper>